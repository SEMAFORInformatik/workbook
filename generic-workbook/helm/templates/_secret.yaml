{{- define "workbook.secret.tpl" -}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "workbook.fullname" . }}-registry
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: {{ template "imagePullSecret" . }}
{{- end -}}

{{- define "workbook.keys.tpl" -}}
{{- if not .Values.oidc.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "workbook.fullname" . }}-jwt-keys
data:
{{ (.Files.Glob "keys/*").AsSecrets | indent 2 }}
{{- end -}}
{{- end -}}
